[supervisord]
user=root
nodaemon=true ; Run in foreground, essential for Docker
; Send supervisord's own log to container stdout. /dev/fd/1 works broadly; /dev/stdout also fine.
logfile=/dev/fd/1
logfile_maxbytes=0 ; 0 = unlimited / disable rotation
logfile_backups=0
pidfile=/tmp/supervisord.pid
; Child logs we redirect explicitly below; directory not needed
childlogdir=/tmp

[unix_http_server]
file = /var/run/supervisor.sock ; the path to the socket file

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[program:dockerd]
command=/usr/local/bin/dockerd --config-file=/workspaces/root/.docker/daemon.json --host=unix:///var/run/docker.sock
priority=10
autostart=true
autorestart=true
startsecs=5
startretries=10
stopsignal=TERM
stopasgroup=true
killasgroup=true
; Stream program output directly to container stdout/stderr
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
